(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{161:function(t,e,n){"use strict";n.r(e);var s=n(0),o=Object(s.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("h2",{attrs:{id:"socket"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#socket","aria-hidden":"true"}},[t._v("#")]),t._v(" socket")]),t._v(" "),n("p",[t._v("Socket是应用层与TCP/IP协议族通信的中间软件抽象层，它是一组接口。在设计模式中，Socket其实就是一个门面模式，它把复杂的TCP/IP协议族隐藏在Socket接口后面，对用户来说，一组简单的接口就是全部，让Socket去组织数据，以符合指定的协议。")]),t._v(" "),n("p",[t._v("前端代码")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('\n<script src="https://cdn.bootcss.com/react/16.8.6/umd/react.development.js"><\/script>\n\n<script src="https://cdn.bootcss.com/react-dom/16.8.6/umd/react-dom.development.js"><\/script>\n\n<script src="https://cdn.bootcss.com/babel-standalone/6.26.0/babel.js"><\/script>\n\n<script src=\'https://cdn.bootcss.com/socket.io/2.2.0/socket.io.js\'><\/script>\n\n<script src="https://cdn.bootcss.com/axios/0.18.0/axios.js"><\/script>\n\n<body>\n    <div id=\'box\'></div>\n    <script type="text/babel">\n         let {Component}=React;\n         let socketObj=io.connect("http://localhost:9090")\n         class Index extends Component{\n             render(){\n                 return (\n                     <div>\n                         <button onClick={this.sendCli} >点击</button>\n                     </div>\n                 )\n             }\n             sendCli=()=>{\n                 axios.get("http://localhost:9090/getList").then(res=>{\n                     console.log(res.data)\n                 })\n             }\n             componentDidMount() {\n                socketObj.on("getCount",(res)=>{\n                    console.log(res)\n                })\n             }\n         }\n         ReactDOM.render(<Index/>,document.getElementById(\'box\'))\n    <\/script>\n</body>\n')])])]),n("p",[t._v("后端代码")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('const express = require("express")\nconst app = express()\nlet globalSocket = null;\napp.get("/getList", (req, res) => {\n    globalSocket.emit(\'getCount\', 5)\n    res.writeHead(200, {\n        "Access-Control-Allow-Origin": "*"\n    })\n    res.end("ppp")\n})\nconst server = app.listen(9090, () => {\n    console.log("server is running at 9090")\n})\nlet io = require("socket.io").listen(server);\nio.sockets.on("connection", (socket) => {\n    globalSocket = socket\n    console.log("socket已连接")\n})\n')])])])])}],!1,null,null,null);e.default=o.exports}}]);